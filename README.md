GOST V3 Light Manager 🚀
 
专为小规模场景（≤50节点） 设计的GOST V3交互式管理脚本，主控+被控配套使用，自动拉取最新版、极致轻量、一键排错，零基础快速部署！
 
🌟 核心特性
 
- 自动更新：无需手动改版本号，脚本通过GitHub API拉取最新GOST Release版本
- 极致轻量：主控端资源占用＜50M，被控节点单节点＜5M，低配云服务器/轻量机无压力
- 一站式管理：安装/启停/配置/备份/排错全流程覆盖，新手也能快速上手
- 高稳定性：端口预检测、严格资源限制、启动网络延迟、密钥格式校验，减少90%意外故障
- 高效排错：一键生成排错日志，包含系统/端口/服务/配置全信息，快速定位问题
- 全环境兼容：支持CentOS7+/Ubuntu18+/Debian10+，适配x86_64/arm64双架构
- 加密安全：主控与被控通过TLS加密通信，认证密钥强校验，高危操作二次验证
 
🚀 快速部署
 
一、主控端（管理节点）部署
 
bash
  
# 下载脚本并赋予执行权限
wget -q https://raw.githubusercontent.com/HYT-1840/GOST-V3-Light-Manager/main/gost-manager-master.sh -O gost-manager-master.sh
chmod +x gost-manager-master.sh

# 运行交互式脚本（依赖自动安装，无需提前配置）
./gost-manager-master.sh
 
 
执行后选择选项1，按提示完成安装，安装成功后将输出核心信息（务必保存）：
 
- 面板访问地址： http://<主控IP>:8080 （默认端口8080）
- gRPC连接端口： 50051 （被控节点必填）
- 随机认证密钥：16位字母数字组合（被控节点需与主控一致）
 
二、被控节点（代理节点）部署
 
bash
  
# 下载脚本并赋予执行权限
wget -q https://raw.githubusercontent.com/HYT-1840/GOST-V3-Light-Manager/main/gost-manager-node.sh -O gost-manager-node.sh
chmod +x gost-manager-node.sh

# 运行交互式脚本
./gost-manager-node.sh
 
 
执行后选择选项1，按提示输入以下信息（需与主控端一致）：
 
- 主控端gRPC地址： 主控公网/内网IP:50051 
- 节点认证密钥：主控端生成的16位随机密钥
安装完成后，可直接在主控端面板查看节点在线状态。
 
📋 功能菜单说明
 
主控端脚本（12项核心功能）
 
选项 功能描述 
1 安装主控端（自动最新版+端口预检测+随机密钥生成） 
2-4 启动/停止/重启主控端服务（含Nginx面板服务） 
5 查看运行状态（服务状态+本机IP+资源限制+核心路径） 
6 查看实时日志（按Ctrl+C退出，排错专用） 
7 修改核心配置（自定义gRPC/面板端口，自动开放防火墙） 
8 卸载主控端（需输入 uninstall 验证，彻底清理无残留） 
9 配置备份/恢复（含配置文件+SQLite数据库，防数据丢失） 
10 一键生成排错日志（打包系统/端口/服务/配置信息，快速定位问题） 
11 检测端口连通性（本机gRPC/面板端口监听状态+进程信息） 
12 优化SQLite数据库（碎片清理+体积压缩，提升运行效率） 
0 退出脚本 
 
被控节点脚本（11项核心功能）
 
选项 功能描述 
1 安装被控节点（自动最新版+主控配置+密钥强校验） 
2-4 启动/停止/重启被控节点服务 
5 查看节点状态（服务状态+本机IP+主控配置+资源限制） 
6 查看实时日志（按Ctrl+C退出，排错专用） 
7 重新配置主控信息（更换主控IP/端口/密钥，自动重启服务） 
8 卸载被控节点（需输入 uninstall 验证，彻底清理无残留） 
9 测试主控连通性（PING+TCP端口+服务状态三重检测，精准定位网络问题） 
10 一键生成排错日志（打包节点/系统/端口/连通性信息，快速排错） 
11 备份节点配置（单独打包配置文件，防配置丢失） 
0 退出脚本 
 
🛠️ 关键优化细节
 
1. 极致资源限制（默认开启，无需手动配置）
 
针对小规模场景深度优化，避免服务占用过多系统资源：
 
- 主控端：CPU≤10%、内存≤32M、磁盘IO≤1M/s
- 被控节点：CPU≤5%、内存≤16M、磁盘IO≤512K/s
 
2. 自动最新版实现逻辑
 
脚本通过 curl 调用GitHub官方API拉取GOST最新Release版本，全程无额外依赖，仅使用系统原生命令：
 
bash
  
# 核心逻辑（脚本内置，无需手动执行）
LATEST_VERSION=$(curl -s https://api.github.com/repos/go-gost/gost/releases/latest | grep -E 'tag_name' | cut -d'"' -f4 | sed 's/v//g')
 
 
若服务器无法访问GitHub，脚本会直接提示错误并退出，可配置服务器代理后重试。
 
3. 安全加固特性
 
- 通信加密：主控与被控节点通过TLS加密通信，防止数据传输被窃取
- 密钥校验：认证密钥强制≥8位，且必须包含字母+数字，脚本自动校验
- 操作防护：卸载、重新安装等高危操作需二次验证，防止误操作
- 端口防护：安装前自动检测端口占用，避免端口冲突导致服务启动失败
- 防火墙自动配置：安装/修改端口时，自动开放对应TCP端口，无需手动操作
 
📌 适配环境
 
操作系统 版本要求 支持架构 依赖要求 
CentOS 7.x及以上 x86_64/arm64 脚本自动安装（nginx/wget/tar等） 
Ubuntu 18.04及以上 x86_64/arm64 脚本自动安装（nginx/wget/tar等） 
Debian 10及以上 x86_64/arm64 脚本自动安装（nginx/wget/tar等） 
 
❌ 常见问题排查
 
1. 安装时提示「GitHub访问失败」
 
- 原因：服务器网络无法访问GitHub API或下载GOST资源
- 解决方法：
1. 配置服务器临时代理，再重新运行脚本：
bash
  
export https_proxy=http://你的代理IP:代理端口
 
2. 手动下载GOST最新版包，放到 /tmp 目录，再重新运行脚本（脚本会自动识别）。
 
2. 被控节点无法连接主控端
 
执行被控节点脚本选项9（主控连通性测试），根据输出逐一排查：
 
- PING不通：检查主控端防火墙是否开放ICMP，或主控/被控节点网络是否互通（公网需开放主控端口）
- 端口不通：检查主控端gRPC端口（默认50051）是否开放，且主控端服务是否正常运行
- 服务未运行：执行被控节点脚本选项2启动服务，或选项10生成排错日志查看具体错误
- 密钥错误：执行被控节点脚本选项7，重新输入主控端正确的认证密钥
 
3. 服务启动失败/面板无法访问
 
- 主控端面板无法访问：检查8080端口是否开放，且Nginx服务是否正常运行（可通过选项5查看状态）
- 服务启动失败：执行对应脚本选项10一键生成排错日志，日志文件保存在 /root/ 目录，可根据日志中的错误信息定位问题。
 
4. 安装后提示「架构不匹配」
 
- 原因：脚本自动识别的服务器架构与GOST包不兼容
- 解决方法：确认服务器架构（ uname -m ），手动下载对应架构的GOST包放到 /tmp 目录，重新运行脚本。
 
📄 许可证
 
本项目采用 MIT License 开源协议，允许自由使用、修改、分发，商业/非商业场景均可使用，前提是保留原作者版权声明。
 
🤝 贡献指南
 
欢迎各位开发者提交Issue和PR，一起优化脚本功能，贡献步骤如下：
 
1. Fork本仓库到你的GitHub账号
2. 创建特性分支： git checkout -b feature/你的功能名称 
3. 提交修改： git commit -m '添加xxx功能/修复xxx问题' 
4. 推送到你的分支： git push origin feature/你的功能名称 
5. 打开本仓库的Pull Request，描述你的修改内容
 
📞 反馈与交流
 
- 问题反馈：在GitHub仓库提交Issue，附排错日志和详细问题描述
- 功能建议：欢迎提交Issue提出你的功能需求，我会优先适配小规模场景需求
 
 
 
最后更新
 
2026.01.29 | 新增自动拉取最新版、一键排错、配置备份恢复功能
 
